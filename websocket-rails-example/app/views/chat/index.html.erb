<h1>Chat#index</h1>

<ul id="chat_area">
</ul>

<input id="comment" type="text">
<input id="send" type="button" value="send">

<script>
  var ws_rails = new WebSocketRails("localhost:3000/websocket")
  var websocket_chat_channel = ws_rails.subscribe("websocket_chat_channel");

  var target = /* ws_rails */ websocket_chat_channel;

  target.bind("websocket_chat",   function(message) {
    var message_li = document.createElement("li");
    message_li.textContent = message;

    document.getElementById("chat_area").appendChild(message_li);
  })

  document.getElementById("send").onclick = function() {
    var comment = document.getElementById("comment").value;

    target.trigger("websocket_chat", comment);
  }
</script>
